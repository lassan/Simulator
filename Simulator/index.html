<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Processor Simulator</title>
        <link href="StyleSheets/fonts.css" rel="stylesheet" />
        <link href="StyleSheets/style.css" rel="stylesheet" />
        <link href="StyleSheets/console.css" rel="stylesheet"/>
        <script type="text/javascript" src="Libraries/jquery-2.0.3.min.js"> </script>
        <script type="text/javascript" src="TypeScript/Enums.js"> </script>
        <script type="text/javascript" src="TypeScript/ReOrderBuffer.js"></script>
        <script type="text/javascript" src="TypeScript/Display.js"> </script>
        <script type="text/javascript" src="TypeScript/Configuration.js"></script>
        <script type="text/javascript" src="TypeScript/helpers.js"> </script>
        <script type="text/javascript" src="TypeScript/examples.js"> </script>
        
        <script type="text/javascript" src="TypeScript/Instrumentation.js"></script>
        
        <script type="text/javascript" src="TypeScript/Instructions.js"> </script>
        <script type="text/javascript" src="TypeScript/Assembler.js"> </script>
        <script type="text/javascript" src="TypeScript/ReservationStationEntry.js"></script>
        <script type="text/javascript" src="TypeScript/ReservationStation.js"></script>
        
        <script type="text/javascript" src="TypeScript/BranchPredictors.js"></script>
        <script type="text/javascript" src="TypeScript/FetchUnit.js"> </script>
        <script type="text/javascript" src="TypeScript/DecodeUnit.js"> </script>
        
        <script type="text/javascript" src="TypeScript/ExecutionUnit.js"> </script>
        <script type="text/javascript" src="TypeScript/ArithmeticUnit.js"> </script>
        <script type="text/javascript" src="TypeScript/BranchUnit.js"> </script>
        <script type="text/javascript" src="TypeScript/LoadUnit.js"> </script>
        <script type="text/javascript" src="TypeScript/StoreUnit.js"> </script>

        <script type="text/javascript" src="TypeScript/CPU.js"> </script>
        <script type="text/javascript" src="TypeScript/Pipeline.js"> </script>
        <script type="text/javascript" src="TypeScript/initialise.js"> </script>

    </head>
    <body>
        <div id="topRectangle"> </div>
        <div id="headerContent">
            <h1>Processor Simulator</h1>
            <h2>COMSM0109</h2>
        </div>
        <div id="mainContent">
            
            <div id="topRow">
                <div class="section leftMostSection">
                    <h3>Registers</h3>
                    <table id="registerTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>r0</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r1</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r2</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r3</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r4</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r5</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r6</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r7</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r8</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r9</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r10</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r11</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r12</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>r13</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>pc</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>st</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="section">
                    <h3>Memory</h3>
                    <table id="memoryTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>15</td>
                                <td></td>
                            </tr>

                        </tbody>
                    </table>
                </div>
                
                <div class="section" id="configuration">
                    <h3>Configuration</h3>
                    <div>
                        Number of units: <br/>
                        Arithmetic <input name="numAlu" type="number" value="4"/><br/>
                        Load <input name="numLoad" type="number" value ="2"/><br />
                        Store <input name="numStore" type="number" value="1" /><br />
                        Decode <input name="numDecode" type="number" value="4"/><br/>
                        <hr />
                        Size of Reservation Station <input name="sizeRS" value="32"/><br />
                        Speculative Execution Depth <input name="speculativeBranchDepth" value="4"><br/>
                        <hr/>
                        Out of Order <input name="outOfOrder" type="checkbox" checked="checked"/><br/>
                        Output Pipeline State (slow) <input name="outputState" type="checkbox"/><br/>
                        Branch Prediction <select id="branchPrediction">
                                              <option value="1">Displacement</option>
                                              <option value="2">AlwaysTaken</option>                      
                                              <option value="3">Dynamic</option>
                                              <option value="4">NeverTaken</option>
                                          </select>
                    </div>
                </div>

                <div class="section" 
                     id="assemblyInputDiv">
                    <h3>Control</h3>
                    <div>
                        <select>
                            <option>Make a selection</option>
                            <optgroup label="ArithmeticUnit Instructions">
                                <option>MOV</option>
                                <option>ADD</option>
                                <option>ADDI</option>
                                <option>SUB</option>
                                <option>MUL</option>
                                <option>SUBI</option>
                            </optgroup>
                            <optgroup label="Branch and Conditional Instructions">
                                <option>CMP</option>
                                <option>B</option>
                                <option>BEQ</option>
                                <option>BNE</option>
                                <option>BGT</option>
                                <option>BLT</option>
                            </optgroup>
                            <optgroup label="Memory Instructions">
                                <option>LDR</option>
                                <option>STR</option>
                            </optgroup>
                            <optgroup label="Benchmark Programs">
                                <option>Superscalar</option>
                                <option>While Loop</option>
                                <option>Unrolled While Loop</option>
                                <option>Fibonacci Sequence Generator</option>
                                <option>Bubble Sort</option>
                                <option>Convolution</option>
                            </optgroup>
                        </select>
                        <textarea></textarea>
                        <button id="executeButton">Execute</button>
                    </div>
                </div>
                <div class="section rightMostSection">
                    <h3>Known Issues</h3>
                    <div>
                        <ul>
                            <li>No input validation is performed. If you enter an instruction incorrectly, the processor will probably go in an infinite loop.</li>
                            <li>Bubble sort doesn't work correctly with Speculative Execution Depth > 1 and prediction strategies Dynamic and NeverTaken. Probably something to with memory consistency.</li>
                            <li>Basically, Branch prediction and Load/Store instructions don't seem to mix. So, Convolution is just broken.</li>
                        </ul>
                    </div>
                </div>

            </div>
          
            <hr/>
            <!--<div id="consoleSeperator"> </div>-->
            
            <div class="section leftMostSection" id="console">
                <h3>Output</h3>
                <div> </div>
                <button id="clearConsoleButton">Clear Console</button>
            </div>
            <div class="section rightMostSection" id="stats">
                <h3>Stats</h3>
                <div></div>
            </div>
        </div>
    </body>
</html>
